<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Settings • Universal Web App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <a class="skip-link" href="#content">Skip to content</a>

  <div class="stage">
    <div class="app-shell has-settings-button" role="application" aria-label="App">
      <a href="index.html" rel="prev" class="back-button" aria-label="Back" title="Back"
         onclick="if (history.length > 1) { history.back(); return false; }">
        <svg class="back-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
          <path fill="currentColor" d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
        </svg>
      </a>

      <main id="content" class="app-content" role="main">
        <section class="card" tabindex="-1">
          <h1>Settings</h1>
          <p>Create an account so your progress is saved in the cloud.</p>

          <div class="settings-form">
            <div class="setting-row" style="flex-direction:column; align-items:stretch; gap:10px;">
              <div style="display:flex; align-items:center; justify-content:space-between;">
                <strong>Account</strong>
                <span id="auth-status" style="opacity:.85;">Checking…</span>
              </div>

              <form id="auth-form" class="auth-form" style="display:grid; gap:8px;">
                <label>
                  <span>Username</span>
                  <input id="auth-username" type="text" required autocomplete="username" />
                </label>
                <label>
                  <span>Password</span>
                  <input id="auth-password" type="password" required autocomplete="current-password" />
                </label>
                <div style="display:flex; gap:8px;">
                  <button id="btn-login" class="btn" type="submit">Log in</button>
                  <button id="btn-signup" class="btn" type="button" style="background:#2563eb;">Sign up</button>
                </div>
              </form>

              <div id="auth-loggedin" style="display:none;">
                <div style="display:flex; align-items:center; justify-content:space-between;">
                  <span>Signed in as <strong id="auth-name"></strong></span>
                  <button id="btn-logout" class="btn" style="background:#6b7280;">Log out</button>
                </div>
              </div>
            </div>

            <div class="setting-row" id="google-home-section" style="flex-direction:column; align-items:stretch; gap:10px; display:none;">
              <div style="display:flex; align-items:center; justify-content:space-between;">
                <strong>Google Home</strong>
                <span id="google-status" style="opacity:.85;">Not linked</span>
              </div>
              <div id="google-link-controls" style="display:grid; gap:8px;">
                <button id="btn-google-link" class="btn" style="background:#2563eb;">Pair Google Home (dev)</button>
              </div>
              <div id="google-unlink-controls" style="display:none;">
                <div style="display:flex; align-items:center; justify-content:space-between;">
                  <span>Linked to <strong id="google-account-name"></strong></span>
                  <button id="btn-google-unlink" class="btn" style="background:#6b7280;">Unlink</button>
                </div>
              </div>
            </div>
          </div>
        </section>
      </main>

      <header class="app-nav" role="banner">
        <nav aria-label="Primary">
          <ul class="nav-list" role="list">
            <li>
              <a href="index.html" class="nav-item" aria-label="Home" title="Home">
                <img class="nav-icon" src="images/home-icon.png" alt="" aria-hidden="true" />
              </a>
            </li>
            <li>
              <a href="checkbox.html" class="nav-item" aria-label="Checkbox" title="Checkbox">
                <img class="nav-icon" src="images/checkbox-icon.png" alt="" aria-hidden="true" />
              </a>
            </li>
            <li>
              <a href="socials.html" class="nav-item" aria-label="Socials" title="Socials">
                <img class="nav-icon" src="images/social-icon.png" alt="" aria-hidden="true" />
              </a>
            </li>
          </ul>
        </nav>
      </header>
    </div>
  </div>

  <script>
    window.API_BASE_URL = window.API_BASE_URL || "http://localhost:8787";
  </script>
  <script src="scripts/api.js" defer></script>
  <script src="scripts/settings.js" defer></script>
</body>
</html>
