<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Settings • Universal Web App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <a class="skip-link" href="#content">Skip to content</a>

  <div class="stage">
    <div class="app-shell has-settings-button" role="application" aria-label="App">
      <!-- Back button (top-left). Uses history.back() with fallback to Home -->
      <a href="index.html" rel="prev" class="back-button" aria-label="Back" title="Back"
         onclick="if (history.length > 1) { history.back(); return false; }">
        <svg class="back-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
          <path fill="currentColor" d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
        </svg>
      </a>

      <main id="content" class="app-content" role="main">
        <section class="card" tabindex="-1">
          <h1>Settings</h1>
          <p>Connect services to enable energy‑saving automations.</p>

          <div class="settings-form">
            <div class="setting-row" style="flex-direction:column; align-items:stretch; gap:8px;">
              <div style="display:flex; align-items:center; justify-content:space-between; gap:12px;">
                <strong>Google Home (Nest)</strong>
                <span id="google-status" style="opacity:.8; font-size:.9rem;">Checking…</span>
              </div>
              <div style="display:flex; gap:8px; flex-wrap:wrap;">
                <button id="google-auth-btn" class="btn">Sign in with Google</button>
                <button id="google-disconnect-btn" class="btn" style="display:none; background:#6b7280;">Disconnect</button>
              </div>
              <small style="opacity:.8;">
                Thermostat control uses Google’s Smart Device Management API. Lights are not exposed by SDM;
                use vendor integrations or Home Assistant for lights.
              </small>
            </div>
          </div>
        </section>
      </main>

      <header class="app-nav" role="banner">
        <nav aria-label="Primary">
          <ul class="nav-list" role="list">
            <li>
              <a href="index.html" class="nav-item" aria-label="Home" title="Home">
                <img class="nav-icon" src="images/home-icon.png" alt="" aria-hidden="true" />
              </a>
            </li>
            <li>
              <a href="checkbox.html" class="nav-item" aria-label="Checkbox" title="Checkbox">
                <img class="nav-icon" src="images/checkbox-icon.png" alt="" aria-hidden="true" />
              </a>
            </li>
            <li>
              <a href="socials.html" class="nav-item" aria-label="Socials" title="Socials">
                <img class="nav-icon" src="images/social-icon.png" alt="" aria-hidden="true" />
              </a>
            </li>
          </ul>
        </nav>
      </header>
    </div>
  </div>

  <script>
    // Point to your backend (adjust if you deploy elsewhere)
    window.API_BASE_URL = window.API_BASE_URL || "http://localhost:8787";
  </script>
  <script src="scripts/api.js" defer></script>
  <script src="scripts/settings.js" defer></script>
</body>
</html>
